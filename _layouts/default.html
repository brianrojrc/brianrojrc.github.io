<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - Brian Rojas{% else %}Brian Rojas{% endif %}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav" id="sidebarNav">
        <div class="nav-header">
            <a href="{{ '/' | relative_url }}" class="site-title">Brian Rojas</a>
        </div>
        <ul class="nav-links">
            <li><a href="{{ '/' | relative_url }}" {% if page.url == "/" %}class="active"{% endif %}>Home</a></li>
            <li><a href="{{ '/about' | relative_url }}" {% if page.url contains 'about' %}class="active"{% endif %}>About</a></li>
            <li><a href="{{ '/projects' | relative_url }}" {% if page.url contains 'projects' %}class="active"{% endif %}>Projects</a></li>
            <li><a href="{{ '/research' | relative_url }}" {% if page.url contains 'research' %}class="active"{% endif %}>Research</a></li>
            <li><a href="{{ '/blog' | relative_url }}" {% if page.url contains 'blog' or page.url contains 'posts' %}class="active"{% endif %}>Blog</a></li>
            <li><a href="{{ '/contact' | relative_url }}" {% if page.url contains 'contact' %}class="active"{% endif %}>Contact</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            {{ content }}
            
            <footer>
                <p>© 2025 Brian Rojas. Built with Jekyll, hosted on GitHub Pages I'm not a web dev btw.</p>
            </footer>
        </div>
    </main>

    <!-- Mathematical Background -->
    <div class="math-background" id="mathBackground"></div>

    <!-- Scripts -->
    <script>
        // Mobile Menu Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebarNav = document.getElementById('sidebarNav');
            
            if (mobileMenuToggle && sidebarNav) {
                mobileMenuToggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    sidebarNav.classList.toggle('active');
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(event) {
                    const isClickInsideNav = sidebarNav.contains(event.target);
                    const isClickOnToggle = mobileMenuToggle.contains(event.target);
                    
                    if (!isClickInsideNav && !isClickOnToggle && sidebarNav.classList.contains('active')) {
                        mobileMenuToggle.classList.remove('active');
                        sidebarNav.classList.remove('active');
                    }
                });
                
                // Close menu when clicking a link
                const navLinks = sidebarNav.querySelectorAll('a');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenuToggle.classList.remove('active');
                        sidebarNav.classList.remove('active');
                    });
                });
            }
        });

        // Mathematical Background Generator
        const equations = [
            // Partial Derivatives
            '∂V/∂t',
            '∂²V/∂S²',
            '∂V/∂S',
            '∂f/∂x',
            '∂²f/∂x∂y',
            '∇f',
            
            // Greeks
            'Δ', 'Γ', 'θ', 'ν', 'ρ',
            'α', 'β', 'γ', 'λ', 'σ', 'μ',
            
            // Volatility
            'σ²',
            'σᵢₘₚₗᵢₑd',
            'σₗₒcₐₗ',
            'dW',
            
            // Machine Learning
            '∇θJ',
            '∂L/∂W',
            'η∇J',
            'ReLU(x)',
            
            // Stochastic Calculus
            'dS = μdt + σdW',
            'E[dW²] = dt',
            
            // Symbols
            '∫', '∑', '∂', '∇', 'Σ', 'Θ', 'Λ'
        ];

        let mouseX = 0;
        let mouseY = 0;
        const equationElements = [];

        function createMathBackground() {
            const container = document.getElementById('mathBackground');
            if (!container) return;
            
            const numberOfEquations = 20;
            
            for (let i = 0; i < numberOfEquations; i++) {
                const equation = document.createElement('div');
                equation.className = 'math-equation';
                
                // Random equation
                equation.textContent = equations[Math.floor(Math.random() * equations.length)];
                
                // Random size
                const sizes = ['small', 'medium', 'large'];
                equation.classList.add(sizes[Math.floor(Math.random() * sizes.length)]);
                
                // Random base position
                const baseX = Math.random() * 100;
                const baseY = Math.random() * 100;
                
                // Store initial position and parallax depth
                equationElements.push({
                    element: equation,
                    baseX: baseX,
                    baseY: baseY,
                    depth: 0.5 + Math.random() * 1.5 // Different parallax depths (0.5 to 2)
                });
                
                container.appendChild(equation);
            }
            
            // Start mouse tracking
            startMouseTracking();
        }

        function startMouseTracking() {
            document.addEventListener('mousemove', (e) => {
                // Normalize mouse position to -1 to 1 range
                mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
                mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
            });
            
            // Animate equations with parallax effect
            function animate() {
                equationElements.forEach((eq) => {
                    // Apply parallax offset based on mouse position and depth
                    // Mouse at center (0,0) = no offset
                    // Mouse at edges = offset based on depth
                    const offsetX = mouseX * eq.depth * 3; // Multiply by 3 for more movement
                    const offsetY = mouseY * eq.depth * 3;
                    
                    const newX = eq.baseX + offsetX;
                    const newY = eq.baseY + offsetY;
                    
                    eq.element.style.left = newX + '%';
                    eq.element.style.top = newY + '%';
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // Initialize math background
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createMathBackground);
        } else {
            createMathBackground();
        }
    </script>
</body>
</html>
